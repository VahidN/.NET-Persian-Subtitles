1
00:00:01,117 --> 00:00:05,736
‫در این مثال اینترفیس INotifyPropertyChanged
‫را بر روی کلاس ساده ای که پیشتر نوشتم،
‫پیاده سازی خواهم کرد.

2
00:00:06,126 --> 00:00:09,318
‫تا به این ترتیب، تغییرات مقادیر خواص،
‫به رابط کاربری نیز منعکس گردد.

3
00:00:10,226 --> 00:00:13,678
‫در ابتدا کدهایی را اضافه خواهم کرد که
‫کارشان تغییر مقادیر خواص است.

4
00:00:14,287 --> 00:00:16,462
‫دکمه ای را به رابط کاربری خود اضافه می‌کنم.

5
00:00:17,869 --> 00:00:19,425
‫و سپس روال رویدادگردان کلیک را
‫نیز اضافه خواهم کرد.

6
00:00:20,313 --> 00:00:21,600
‫در فایل Code behind

7
00:00:21,860 --> 00:00:23,077
‫شخص را

8
00:00:23,406 --> 00:00:24,404
‫اندکی پیرتر خواهم کرد.

9
00:00:25,521 --> 00:00:30,959
‫برنامه را به همین نحو اجرا می‌کنم
‫تا مشخص گردد که با تغییر مقادیر خواص،
‫رابط کاربری برنامه به روز نخواهد شد.

10
00:00:31,298 --> 00:00:32,845
‫اکنون اگر بر روی دکمه کلیک کنم

11
00:00:32,995 --> 00:00:34,351
‫اتفاقی رخ نمی‌دهد.

12
00:00:34,760 --> 00:00:38,482
‫اجازه دهیم تا بررسی کنیم که آیا
‫واقعا این روال رویدادگران، مقدار خاصیت
‫را تغییر می‌دهد یا خیر.

13
00:00:39,180 --> 00:00:41,336
‫یک break point را در این روال قرار داده

14
00:00:42,553 --> 00:00:45,506
‫به برنامه بازگشته و مجددا بر روی دکمه
‫کلیک می‌کنم.

15
00:00:46,264 --> 00:00:50,575
‫اکنون به break point رسیده و اگر
‫به شیء Person در دیباگر نگاهی بیندازیم

16
00:00:50,864 --> 00:00:53,109
‫می توانید مشاهده نمائید که این شخص

17
00:00:53,358 --> 00:00:54,486
‫نسبت به آغاز برنامه پیرتر شده است

18
00:00:55,334 --> 00:00:56,860
‫و اگر کار دیباگ را با step over
‫ادامه دهم

19
00:00:57,150 --> 00:00:59,255
‫مجددا نسبت به حالت قبلی
‫پیرتر خواهد شد

20
00:01:00,871 --> 00:01:05,441
‫و اگر اجازه دهم که برنامه به کار
‫خود ادامه دهد و به رابط کاربری برگردیم،
‫مشاهده خواهید کرد که چیزی تغییر نکرده است.

21
00:01:06,229 --> 00:01:07,207
‫اما چرا اینطور است؟

22
00:01:08,384 --> 00:01:11,148
‫اگر به کدها و شیء منبع بازگردیم

23
00:01:11,766 --> 00:01:13,872
‫مشاهده خواهیم کرد که این خواص
‫بسیار ساده تعریف شده اند.

24
00:01:14,271 --> 00:01:20,197
‫و متشکل هستند از یک سری خاصیت
‫به صورت خودکار پیاده سازی شده که
‫در حقیقت یک سری محصور کننده خودکار
‫فیلدهای خصوصی نیز به شمار می‌روند.

25
00:01:21,205 --> 00:01:24,567
‫اکنون visual studio را وادار خواهم کرد
‫تا نسخه کامل این خاصیت را تولید کند.

26
00:01:28,169 --> 00:01:34,515
‫به این ترتیب نسخهٔ اصلی
‫و غیرخودکار این خاصیت را که
‫visual studio برای ما تدارک دیده است،
‫می توان تولید کرد.

27
00:01:35,093 --> 00:01:38,386
‫بنابراین در اینجا چیزی که به data binding
‫تغییرات را اعلام کند وجود خارجی ندارد.

28
00:01:39,523 --> 00:01:40,731
‫بنابراین اجازه دهید تا این مشکل را برطرف کنیم.

29
00:01:41,429 --> 00:01:43,704
‫ابتدا namespace صحیح مرتبط با
‫WinRT را اضافه می‌کنم.

30
00:01:44,452 --> 00:01:47,545
‫که
Windows. UI. Xaml. Data
‫می باشد

31
00:01:47,894 --> 00:01:52,464
‫و نه System. ComponentModel
‫که در WPF و Silverlight استفاده می‌شود.

32
00:01:53,292 --> 00:01:54,968
‫در ادامه این اینترفیس را پیاده سازی می‌کنم.

33
00:01:55,537 --> 00:01:57,812
‫و این تنها یک رخداد می‌باشد.

34
00:01:58,929 --> 00:02:02,930
‫در ادامه یک متد کمکی را به نام
‫OPropertyChanged را اضافه می‌کنم
‫تا سبب بروز این رخداد گردد.

35
00:02:04,457 --> 00:02:07,500
‫به این ترتیب هر شیءایی که مشترک
‫اطلاع رسانی‌های این رخداد گردد

36
00:02:07,849 --> 00:02:08,976
‫با فراخوانی آن

37
00:02:09,296 --> 00:02:11,720
‫و ارسال وهله ای از شیء جاری
‫به عنوان منشاء رخداد

38
00:02:11,720 --> 00:02:14,943
‫و شیءایی که مشخص می‌کند
‫کدام خاصیت تغییر کرده است

39
00:02:17,557 --> 00:02:20,111
‫اکنون می‌توان OPropertyChanged را
‫در قسمت set تعریف خاصیت بکار برد.

40
00:02:20,899 --> 00:02:25,778
‫ابتدا بررسی می‌کنم که خاصیت
‫تنظیم شده نسبت به نمونه قبلی خود
‫تغییر کرده است.

41
00:02:26,087 --> 00:02:29,979
‫اگر این مقدار تنظیم شده، واقعا جدید
‫باشد، ابتدا فیلد مرتبط را به روز کرده

42
00:02:30,487 --> 00:02:33,211
‫و سپس آن متد OPropertyChanged
‫را فراخوانی می‌کنم

43
00:02:33,431 --> 00:02:36,324
‫تا مشخص نمائیم که خاصیت سن تغییر کرده است.

44
00:02:37,601 --> 00:02:40,435
‫در ادامه break point تعریف شده
‫در روال رویدادگردان کلیک را که

45
00:02:40,475 --> 00:02:41,473
‫پیشتر اضافه کرده بودم، حذف کرده

46
00:02:42,869 --> 00:02:44,226
‫و سپس برنامه را مجددا اجرا می‌کنم

47
00:02:45,932 --> 00:02:46,770
‫و اینبار

48
00:02:47,100 --> 00:02:48,457
‫زمانیکه بر روی دکمه کلیک می‌کنم

49
00:02:48,786 --> 00:02:56,309
‫مقدار سن تغییر خواهد کرد و
‫به روز رسانی رابط کاربری را می‌توان
‫شاهد بود. زیرا اکنون data binding
‫می تواند از تغییرات رخداده در مقادیر
‫خواص مطلع گردد

50
00:02:56,309 --> 00:02:59,683
‫و به این ترتیب سبب به روز رسانی
‫اطلاعات مقید شده گردد.

