1
00:00:01,376 --> 00:00:14,397
‫درحالیکه فایل manifest برنامه
‫حاوی اطلاعاتی در مورد ویژگی‌ها
‫و نیازمندی‌های برنامه شما است،
‫اما فراهم کننده توضیحات کاملی در
‫مورد هر آنچه که در آن است، نمی‌باشد. 
‫بنابراین این فایل را یک لیست کامل
‫بسته بندی برنامه نمی‌توان درنظر گرفت.

2
00:00:15,444 --> 00:00:22,319
‫برنامه‌های مترو از مکانیزم استانداردی
‫برای بسته بندی برنامه استفاده می‌کنند
‫که یک فایل است حاوی تمام چیزهایی
‫که برنامه شما به آن نیاز دارد.

3
00:00:23,137 --> 00:00:28,395
‫این موارد شامل کدهای کامپایل شده
‫برنامه به همراه DLL‌های سفارشی
‫مورد نیاز برنامه می‌باشند.

4
00:00:28,994 --> 00:00:32,386
‫همچنین تمام فایل‌های XAML
‫نیز به همان شکل اصلی خود الحاق شده اند.

5
00:00:32,825 --> 00:00:44,229
‫بنابراین این نوع برنامه‌ها شبیه
‫به برنامه‌های WPF که فایل‌های XAML
‫را به شکل باینری کامپایل می‌کنند، نیستند. 
‫این مورد بیشتر شبیه به سیلورلایت است
‫که همه چیز شامل فضاهای خالی و حتی
‫توضیحات کدها، به همان شکل
‫باقی نگه داشته می‌شوند.

6
00:00:45,047 --> 00:00:58,985
‫تمام منابع مورد نیاز برنامه نیز در اینجا
‫حضور دارند؛ مانند تصاویر یا حتی
‫منابع کامپایل شده محلی سازی برنامه

7
00:01:00,322 --> 00:01:02,976
‫فایل manifest برنامه نیز در این بسته
‫حضور دارد.

8
00:01:03,116 --> 00:01:05,630
‫به همراه یک امضای دیجیتال.

9
00:01:06,419 --> 00:01:08,913
‫تمام برنامه‌های مترو باید امضا شوند.

10
00:01:10,140 --> 00:01:12,345
‫می تونیم به یکی از این بسته‌ها ‫نگاهی بیندازیم.

11
00:01:14,929 --> 00:01:19,738
‫زمانیکه برنامه ای را توسط visual studio
‫اجرا می‌کنیم، visual studio به صورت
‫خودکار برنامه را توزیع می‌کند.

12
00:01:20,556 --> 00:01:26,313
‫پوشه ای را ایجاد می‌کند که اساسا
‫حاوی نگارش باز شدهٔ بسته توزیع برنامه است.

13
00:01:26,682 --> 00:01:29,267
‫امکان انجام مرحله بسته بندی
‫به نحو مجزا نیز وجود دارد.

14
00:01:30,264 --> 00:01:35,163
‫مکان منوی مرتبط با این عملیات
‫در نگارش‌های مختلف visual studio
‫متفاوت است.

15
00:01:36,051 --> 00:01:43,005
‫من از نگارش ultimate استفاده می‌کنم
‫که منوی مرتبط را در قسمت Project
‫ذیل گزینهٔ Store قرار می‌دهد.

16
00:01:43,804 --> 00:01:48,373
‫اما اگر از express preview edition
‫استفاده می‌کنید، گزینهٔ Store
‫دقیقا کنار گزینهٔ Project قرار دارد.

17
00:01:49,521 --> 00:01:59,608
‫به این دلیل که express preview edition
‫ارائه شده تنها قادر است برنامه‌های مترو
‫را تولید کند. بنابراین وجود این گزینهٔ
‫مجزای منوی Store در این حالت با معنا خواهد بود.

18
00:02:00,526 --> 00:02:06,791
‫اما نگارش Ultimate برای ساخت
‫انواع و اقسام برنامه‌ها طراحی شده است
‫و داشتن یک گزینه جداگانه برای بسته بندی
‫برنامه‌های مترو در آن لزومی نداشته است.

19
00:02:07,480 --> 00:02:16,100
‫بنابراین بجای اینکه آن را تبدیل به
‫یک منوی سطح بالا کنند، آنرا به
‫زیر شاخه منوی پروژه منتقل کرده اند. 
‫اما در هر دو حالت یک سری عملیات
‫مشخص در اینجا قابل انجام خواهد بود.

20
00:02:17,886 --> 00:02:21,528
‫در ادامه بر روی گزینه
Create App Package
‫کلیک می‌کنیم تا بتوانیم
‫توسط آن یک بسته را ایجاد نمائیم.

21
00:02:22,246 --> 00:02:31,016
‫این مکانیزم از آپلود بسته برنامه
‫به فروشگاه ویندوز پشتیبانی می‌کند. 
‫البته فروشگاه ویندوز در زمان تهیه این
‫ویدیو هنوز آماده نشده است، بنابراین
‫گزینهٔ ایجاد یک بسته محلی را
‫انتخاب خواهم کرد.

22
00:02:31,665 --> 00:02:36,564
‫این حالت ساده‌تر نیز می‌باشد
‫نیازی به یک اکانت مخصوص
‫فروشگاه ویندوز نخواهید داشت.

23
00:02:38,469 --> 00:02:43,757
‫در اینجا نیاز است تا محل قرارگیری بسته
‫مشخص شود، به همراه شماره نگارش آن.

24
00:02:44,575 --> 00:02:46,731
‫این صفحه امکان افزایش خودکار
‫شماره نگارش بسته را نیز دارد.

25
00:02:48,696 --> 00:02:51,909
‫اکنون که آماده ایم، اجازه دهید
‫تا بسته را ایجاد نمائیم.

26
00:02:57,237 --> 00:03:00,040
‫اکنون که تمام شده است،
‫اجازه دهید تا مکان ایجاد آن را بیابیم.

27
00:03:00,769 --> 00:03:02,485
‫همانطور که ملاحظه می‌کنید
‫چندین فایل در اینجا ایجاد شده است.

28
00:03:02,784 --> 00:03:07,673
‫این فایل appxupload یک فایل zip
‫است که حاوی دو تا از فایل‌های ‫این زیر شاخه است.

29
00:03:08,172 --> 00:03:11,674
‫فایل appxupload حاوی دو فایل
‫appx و appxsym می‌باشد.

30
00:03:12,432 --> 00:03:15,535
‫appxsym حاوی debug symbols
‫برنامه شما است.

31
00:03:16,383 --> 00:03:23,208
‫اگر این‌ها را به همراه برنامه خود
‫به فروشگاه ویندوز آپلود نمائید،
‫مایکروسافت crash reports
‫بهتری را از برنامه شما می‌تواند ارائه دهد.

32
00:03:24,136 --> 00:03:27,548
‫البته این فایل‌های symbol
‫بر روی سیستم‌های کاربران نصب نمی‌شوند.

33
00:03:28,087 --> 00:03:35,390
‫فقط فایل appx نصب می‌شود که این نیز
‫یک فایل zip است. اما پیش از این
‫بهتر است دو فایل دیگر را بررسی کنیم.

34
00:03:36,098 --> 00:03:41,506
‫این فایل cer حاوی یک کپی از مجوزی
‫است که برنامه توسط آن امضاء شده است.

35
00:03:42,534 --> 00:03:54,507
‫و این batch file ابتدا این مجوز را
‫به عنوان یک مجوز مطمئن نصب کرده و
‫سپس نسبت به نصب برنامه اقدام می‌کند. 
‫به این ترتیب بدون مراجعه به فروشگاه ویندوز8
‫می توان بسته ای را نصب کرد.

36
00:03:55,454 --> 00:04:03,436
‫visual studio این موارد را برای من
‫ایجاد کرده است زیرا از آن درخواست کردم
‫که بسته ای محلی را بجای توزیع
‫در فروشگاه ویندوز ایجاد نماید.

37
00:04:04,823 --> 00:04:16,087
‫بنابراین این فایل appx ، فایل اصلی است. 
‫بنابراین یک کپی از آن را ایجاد کرده و
‫پسوند آن را به zip تغییر می‌دهیم تا بتوانیم
‫محتویات داخل آن را بررسی کنیم.

38
00:04:19,330 --> 00:04:31,941
‫اغلب فایل هایی را که در اینجا
‫مشاهده می‌کنید، مستقیما از پروژه
‫visual studio ما تهیه شده اند. برای
‫مثال پوشه images حاوی تصاویر
‫و logo پیش فرض برنامه است. همچین
‫فایل‌های XAML برنامه نیز قابل مشاهده هستند.

39
00:04:32,151 --> 00:04:37,299
‫همچنین فایل کامپایل شدهٔ اجرایی
‫برنامه به همراه manifest آن
‫نیز در اینجا قابل مشاهده است.

40
00:04:37,808 --> 00:04:40,113
‫اما چند فایل اضافه شده نیز در اینجا
‫حضور دارند.

41
00:04:40,672 --> 00:04:47,197
‫‫اگر پیشتر یکی از فایل‌های ‫آفیس 2007
‫به بعد را گشوده باشید،
‫این فایل Content_Types. XML
‫آشنا به نظر می‌رسد.

42
00:04:47,965 --> 00:04:54,051
‫از office 2007 به بعد، فایل‌های ‫اغلب برنامه‌های
‫مجموعه آفیس ‫به فرمت OpenXML تبدیل شده اند.

43
00:04:54,909 --> 00:05:05,595
‫که به آن
open packaging conventions format
‫نیز گفته می‌شود. که در حقیقت
‫یک فایل zip است به همراه تعدادی
‫قرار داد از پیش تعیین شده.

44
00:05:06,593 --> 00:05:14,136
‫فایل Content_Types. XML محل
‫تعریف Mime types انواع و اقسام
‫فایل‌های بسته است.

45
00:05:15,213 --> 00:05:18,745
‫به این ترتیب یک فایل مورد علاقه
‫و مرتبط را بهتر می‌توان یافت.

46
00:05:19,104 --> 00:05:25,380
‫برای مثال زمانیکه که یک برنامه مترو
‫را بر روی ویندوز 8 نصب می‌کنیم، ابتدا
‫به دنبال فایل manifest برنامه خواهد گشت.

47
00:05:25,919 --> 00:05:32,075
‫و این فایل مشخص می‌کند که فایل
‫manifest برنامه، فایلی است با پسوند XML

48
00:05:33,053 --> 00:05:45,554
‫اگر تعداد فایل‌های XML برنامه شما
‫زیاد باشد، این فایل Content_Types. XML
‫جهت مشخص سازی اینکه کدامیک
‫فایل manifest برنامه است، دست به تغییرات
‫پیچیده ای خواهد زد و عاقبت ویندوز
‫به این ترتیب می‌تواند فایل manifest
‫برنامه را یافته

49
00:05:45,863 --> 00:05:47,350
‫و از آنجا اجرا کند.

50
00:05:49,405 --> 00:05:53,107
‫اگر دقت کنید یکی از انواع فایل‌های ‫
‫تعریف شده در اینجا blockmap نام دارد.

51
00:05:53,686 --> 00:06:02,356
‫کار آن مشخص سازی هش محتوای
‫فایل‌ها است. به این ترتیب امکان
‫به روز رسانی تنها موارد تغییر کرده
‫میسر خواهد شد.

52
00:06:03,114 --> 00:06:07,295
‫اگر نگارش جدیدی از برنامه
‫تقریبا همانند نگارش قبلی آن باشد

53
00:06:07,404 --> 00:06:17,492
‫امکان تشخیص آن به کمک blockmap
‫یاد شده میسر است و به این ترتیب
‫بسته تولید شده اساسا شامل
‫تغییرات جدید خواهد بود و به این ترتیب
‫زمان دانلود به روز رسانی‌ها را به نحو
‫چشمگیری کاهش می‌دهد.

54
00:06:19,268 --> 00:06:23,987
‫در بین این فایل، یک فایل امضاء نیز
‫وجود دارد که ویندوز از آن جهت بررسی
‫یکپارچگی برنامه کمک می‌گیرد.

55
00:06:25,364 --> 00:06:30,502
‫آخرین مورد این فایل pri است. 
‫این مورد جایی است که منابع محلی
‫شده برنامه در آن قرار می‌گیرند.

56
00:06:31,330 --> 00:06:38,534
‫البته من هیچ نوع محلی سازی را
‫در این برنامه انجام نداده ام،
‫اما این فایل همیشه در این بسته
‫وجود خواهد داشت و در صورت
‫تعریف منابع محلی شده، اندکی
‫حجم بیشتری خواهد داشت.

