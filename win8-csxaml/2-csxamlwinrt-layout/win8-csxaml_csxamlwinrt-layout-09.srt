1
00:00:00,310 --> 00:00:06,720
‫در ادامه چگونگی ساخت یک طرحبندی
‫بر اساس Grid Panel با قابلیت
‫وفق یافتن ‫با شرایط مختلف را
‫بررسی خواهیم کرد.

2
00:00:06,876 --> 00:00:11,613
‫برنامهٔ ساده مرورگر تصاویر را در
‫اینجا ملاحظه می‌کنید.

3
00:00:11,824 --> 00:00:16,223
‫لیست تمام فایل‌های تصویری یافت شده
‫در کتابخانه تصاویر من را نمایش می‌‫دهد.

4
00:00:16,242 --> 00:00:25,722
‫همچنین با انتخاب یکی از آن ها،
‫نگارش و نمونه بزرگ آن را در
‫سمت راست صفحه می‌توان مشاهده کرد.

5
00:00:25,862 --> 00:00:31,689
‫این تمام کاری است که انجام می‌‫دهد. 
‫اجازه دهید به ویژوال استودیو برگشته
‫و آن را از حالت دیباگ خارج ‫کنیم.

6
00:00:31,765 --> 00:00:34,520
‫و در ادامه می‌توانیم نگاهی به
‫کدهای XAML این مثال بیندازیم.

7
00:00:34,863 --> 00:00:39,831
‫کمی تصویر را بزرگتر می‌کنم تا
‫بتوانید تمام طرحبندی را مشاهده کنید.

8
00:00:40,024 --> 00:00:45,447
‫انجام اینکار به کمک انتخاب یکی از
‫عناصر صفحه و کمک گرفتن از ماوس
‫نیز میسر است.

9
00:00:45,571 --> 00:00:50,293
‫به این ترتیب امکان مشاهده کلی شکل
‫نهایی وجود خواهد داشت.

10
00:00:50,325 --> 00:00:57,663
‫طراح XAML ویژوال استودیو، این اندازه بزرگ
‫شده را به کمک DesignHeight و DesignWidth
‫تنظیم می‌کند.

11
00:00:57,924 --> 00:01:01,480
‫این خواص از فضای نام خاصی برگرفته
‫شده اند که در زمان اجرا ندید
‫گرفته خواهند شد.

12
00:01:01,590 --> 00:01:04,242
‫و تنها از آن جهت راهنمایی طراح
‫ویژوال استودیو کمک می‌گیریم.

13
00:01:04,334 --> 00:01:11,278
‫امکان تغییر این مقادیر جهت مشاهده اندازه‫های
‫متفاوت صفحه وجود دارد، اما فعلا
‫آن را به حال خود رها می‌‫کنیم.

14
00:01:11,414 --> 00:01:17,113
‫اگر کمی به سمت پایین صفحه اسکرول
‫کنیم، Grid Panel واقع شده در ریشه
‫یوزر کنترل جاری را می‌توان مشاهده ‫کرد.

15
00:01:17,418 --> 00:01:24,726
‫اگر این گرید را انتخاب کنیم، طراح
‫ویژوال استودیو به کمک یک سری Adorners
‫ساختار Grid را نمایش می‌دهد.

16
00:01:24,885 --> 00:01:29,256
‫همانطور که مشاهده می‌کنید، به کمک
‫تعدادی خط عمودی، گرید به سه ستون
‫تقسیم شده است.

17
00:01:29,365 --> 00:01:33,645
‫که این متناظر است با سه ColumnDefinition
‫تعریف شده در کدهای XAML صفحه.

18
00:01:33,733 --> 00:01:38,312
‫به همین ترتیب در کدهای XAML برنامه
‫دو ردیف تعریف شده است که در
‫طراح ویژوال استودیو نیز مشخص است.

19
00:01:38,498 --> 00:01:45,083
‫اگر به قسمت پایین‌تر کدهای XAML
‫صفحه مراجعه کنیم، می‌توان مشاهده کرد
‫که چگونه هر المان به سلول خاصی
‫در این گرید نسبت داده شده است.

20
00:01:45,152 --> 00:01:54,648
‫در هدر صفحه جاری، جهت نمایش برچسب
‫مرورگر تصاویر در طول دو ستون، ColumnSpan
‫آن به 2 تنظیم شده است.

21
00:01:54,690 --> 00:01:59,792
‫همچنین شروع آن را به کمک خاصیت
‫Column به دومین ستون از سمت چپ
‫صفحه تنظیم کرده ایم.

22
00:02:00,116 --> 00:02:02,561
‫ضمنا لازم به ذکر است که شماره
‫گذاری‌ها در اینجا از صفر شروع ‫می شوند.

23
00:02:02,970 --> 00:02:09,088
‫در اینجا از گرید برای طراحی طرحبندی
‫استاندارد یک برنامه مترو استفاده شده است.

24
00:02:09,268 --> 00:02:14,452
‫برای مثال یک هدر با متنی مشخص
‫و ارتفاعی تنظیم شده باید در اینجا
‫نمایش داده شود.

25
00:02:14,745 --> 00:02:17,775
‫همچنین به کمک حاشیه سمت چپ نیز
‫موقعیت آن تنظیم شده است.

26
00:02:17,853 --> 00:02:21,855
‫به همین دلیل مشاهده می‌کنید که
‫اولین سطر و ستون در اینجا خالی
‫هستند.

27
00:02:21,957 --> 00:02:25,513
‫و فضای باقیمانده بین دو ستون تقسیم
‫شده است.

28
00:02:25,787 --> 00:02:36,111
‫اگر به طراح دقت کنید، عرض ثابت
‫320 را جهت ستون دوم می‌توان
‫مشاهده کرد.

29
00:02:36,422 --> 00:02:39,885
‫این عددی است که من برای تنظیم
‫ستون اسکرول تصاویر انتخاب کرده ام.

30
00:02:40,130 --> 00:02:44,004
‫و ستون دیگر با عرض *1 مشخص
‫شده است.

31
00:02:44,083 --> 00:02:50,051
‫ستاره در اینجا مشخص می‌کند که
‫با تغییر اندازه صفحه، این ستون به
‫صورت خودکار تغییر اندازه خواهد داد تا
‫فضای باقیمانده را پرکند.

32
00:02:50,167 --> 00:02:55,324
‫اگر تنها یک ستون وجود داشت، به
‫این معنا بود که تمام فضای باقیمانده
‫را اشغال کن.

33
00:02:55,694 --> 00:02:58,154
‫وقتی سایر ستون‌ها سهم خود را دریافت
‫می کردند.

34
00:02:58,467 --> 00:03:00,207
‫این مطلب را در عمل در ادامه
‫مشاهده خواهیم کرد.

35
00:03:00,439 --> 00:03:11,389
‫اگر مجددا برنامه را اجرا کرده و
‫تصاویر را بارگذاری نمائیم، مشاهده خواهید کرد
‫که این ستون قسمت اعظم صفحه را
‫به خود اختصاص داده است.

36
00:03:11,603 --> 00:03:14,566
‫به کمک تعریف حاشیه‌ها از اختلاط
‫ستون‌ها جلوگیری شده است.

37
00:03:14,955 --> 00:03:17,712
‫و با توجه به این نکته، تصویر
‫نمایش داده شده در سمت راست، باقیمانده
‫فضای مهیا را پرکرده است.

38
00:03:18,033 --> 00:03:23,302
‫حال اگر برنامهٔ دیگری را در
‫کنار این برنامه به کمک قابلیت snapping
‫قرار دهیم، چه اتفاقی رخ خواهد داد؟

39
00:03:23,528 --> 00:03:29,648
‫برنامه سمت چپی، قسمتی از صفحه را
‫به خود اختصاص خواهد داد…

40
00:03:29,756 --> 00:03:33,052
‫و برنامهٔ من به این ترتیب
‫فضای مهیای کمتری را نسبت به قبل
‫در اختیار خواهد داشت.

41
00:03:33,108 --> 00:03:39,042
‫و این مساله مشکلی را پدید نخواهد
‫آورد، زیرا با توجه به تنظیمات گرید،
‫ستون سوم به صورت خودکار میزان فضای
‫باقیمانده را مورد استفاده قرار خواهد داد.

42
00:03:39,447 --> 00:03:41,427
‫یا به عبارتی کوچکتر و منقبض خواهد
‫شد.

43
00:03:41,703 --> 00:03:47,668
‫به همین ترتیب اگر این برنامه را
‫در یک صفحه عریض‌تر نمایش دهیم،
‫فضای بیشتری به صورت خودکار در اختیار
‫ستون سوم قرار خواهد گرفت.

44
00:03:47,808 --> 00:03:53,899
‫و اگر برنامهٔ سمت چپی را
‫حذف کنیم، مجددا مشاهده خواهید کرد که
‫تصویر قرار گرفته در ستون سوم، بزرگتر
‫نمایش داده خواهد شد.

45
00:03:54,249 --> 00:04:04,740
‫همچنین اگر به سایر تنظیمات کدهای XAML
‫صفحه دقت کنیم، اندازه * برای ردیف
‫دوم نیز به کار گرفته شده است
‫و این ردیف نیز میزان باقیمانده فضای
‫مهیا را به صورت خودکار پر می‌‫کند.

46
00:04:04,834 --> 00:04:11,256
‫حال اگر به تعاریف کدهای XAML گرید
‫صفحه دقت کنیم، نکته ای وجود دارد
‫که ممکن است باعث تعجب شما شود…

47
00:04:11,640 --> 00:04:15,793
‫اندازه طول و عرض سطر اول و
‫ردیف اول، به Auto تنظیم شده اند.

48
00:04:15,928 --> 00:04:23,560
‫به این ترتیب این ردیف و ستون
‫به صورت خودکار به اندازهٔ محتوای
‫قرار گرفته درون آن‌ها درخواهند آمد.

49
00:04:23,790 --> 00:04:31,036
‫اما چرا باید طول و عرض این‫ها
‫را تنظیم کرد، زمانیکه مترو این مقادیر
‫را مقدار دهی می‌کند؟

50
00:04:31,297 --> 00:04:36,261
‫دلیل اینکه نمی‌خواهم اینکار را انجام
‫دهم این است که برنامه ما نیز
‫باید قابلیت snap را داشته باشد.

51
00:04:36,407 --> 00:04:44,699
‫برای مثال اگر برنامه ما توسط کاربر
‫در حالت snap قرار گرفت، نیاز است
‫تا چیز مفیدی را در عرض کم نمایش دهیم.

52
00:04:44,941 --> 00:04:49,342
‫و این کار به کمک استفاده از
‫اندازه‌های پویا ساده‌تر است.

53
00:04:49,644 --> 00:04:55,999
‫درون این ستون بر اساس استانداردهای
‫طراحی مترو، می‌توان طول و عرض مشخصی
‫را به عناصر نسبت داد.

54
00:04:56,105 --> 00:05:01,133
‫اما زمان snap برنامه می‌توان این
‫المان‌ها را مخفی کرد.

55
00:05:01,327 --> 00:05:04,432
‫به این ترتیب اولین سطر و ستون
‫مخفی خواهند شد.

56
00:05:04,456 --> 00:05:11,056
‫همانطور که مشاهده می‌کنید این دو
‫المان با نام‌های metroSpaceLeft
‫و metroHeader ‫نامگذاری شده اند.

57
00:05:11,455 --> 00:05:14,809
‫از این نام‌ها در code behind
‫جهت مدیریت حالت snap برنامه کمک
‫خواهیم گرفت.

58
00:05:15,122 --> 00:05:22,128
‫در سازنده این کلاس، به شیء طرحبندی
‫جاری دسترسی پیدا کرده…

59
00:05:22,153 --> 00:05:26,387
‫و سپس از رخداد LayoutChanged آن…

60
00:05:26,459 --> 00:05:31,324
‫جهت مدیریت حالات مختلف snap برنامه
‫و سیستم ‫استفاده خواهیم کرد.

61
00:05:31,712 --> 00:05:37,589
‫بنابراین در روال رویدادگردان آن با توجه
‫به آرگومان دریافتی، بررسی خواهیم کرد که
‫هم اکنون در چه حالتی قرار داریم.

62
00:05:37,969 --> 00:05:40,377
‫که در کل سه حالت ممکن در
‫اینجا وجود دارد.

63
00:05:40,733 --> 00:05:53,929
‫FullScreen مربوط به حالت متداول نمایش برنامه
‫است. در حالت Fill ، برنامه دیگری
‫در کنار برنامه ما snap شده است
‫و در حالت snap ، این برنامه
‫ما است که در حالت snap قرار
‫گرفته است.

64
00:05:54,081 --> 00:06:01,834
‫در اینجا حالت‌های Fill و FullScreen
‫برای ما مهم نیست. می‌خواهیم بدانیم
‫که آیا برنامه ما در حالت snap
‫قرار گرفته یا خیر.

65
00:06:02,187 --> 00:06:07,645
‫و اگر اینطور است می‌خواهیم دو
‫المان یاد شده را مخفی کنیم.

66
00:06:07,958 --> 00:06:14,676
‫هدر مترو نه تنها بر روی حاشیه
‫بلکه بر روی سطر عنوان
‫نیز تاثیرگذار است.

67
00:06:14,998 --> 00:06:17,632
‫بنابراین اولین سطر کل آن را مخفی
‫خواهد کرد.

68
00:06:17,985 --> 00:06:21,196
‫و سطر دوم حاشیه سمت چپ را
‫مخفی می‌کند.

69
00:06:21,469 --> 00:06:29,608
‫و با توجه به اینکه این دو
‫المان تنها عناصر سطر و ستون اول
‫هستند، وجود اندازه Auto سبب خواهد شد
‫که این سطر و ردیف کلا مخفی ‫شوند.

70
00:06:29,636 --> 00:06:33,919
‫و به این ترتیب تنها لیست قابل
‫اسکرول تصاویر و تصویر اصلی سمت راست
‫صفحه باقی خواهند ماند.

71
00:06:34,137 --> 00:06:40,973
‫با توجه به تنظیمات برنامه، ستون دوم
‫برنامه عرض ثابت 320 را داشت.

72
00:06:41,258 --> 00:06:46,781
‫و این مورد عمدا انتخاب شده است،
‫زیرا این عرض مقداری است که حین
‫snap به برنامه اختصاص داده می‌شود.

73
00:06:47,191 --> 00:06:49,965
‫بنابراین ستون دیگر، فضای باقیمانده ای را
‫در اختیار نخواهد داشت.

74
00:06:50,188 --> 00:06:56,005
‫با توجه به اینکه این ستون با
‫عرض مساوی * مشخص شده است به
‫این معنا که هر آنچه را که
‫باقیمانده پرکن.

75
00:06:56,202 --> 00:07:02,379
‫اما در حالت snap دیگر فضایی برای
‫این ستون باقی نخواهد ماند و برنامه
‫به یک list view تقلیل می‌یابد.

76
00:07:02,724 --> 00:07:04,126
‫و چیز دیگری باقی نخواهد ماند.

77
00:07:04,533 --> 00:07:06,255
‫اجازه دهید تا این را در عمل
‫مشاهده کنیم.

78
00:07:06,523 --> 00:07:21,811
‫ابتدا برنامه را در حالت تمام صفحه
‫نمایش خواهیم داد و سپس در طی
‫عملیاتی که مشاهده می‌کنید، آن را
‫در حالت snap قرار می‌دهیم. به
‫این ترتیب تنها لیست تصاویر
‫باقی خواهد ماند.

79
00:07:22,005 --> 00:07:38,504
‫در ادامه اگر عرض برنامه را بیشتر
‫کنیم، در حالت fill قرار خواهیم گرفت
‫و مجددا موارد مخفی شده نمایان خواهند
‫شد و دوباره به حالت snap سوئیچ
‫می کنیم.

